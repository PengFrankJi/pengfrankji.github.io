<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Peng Frank Ji</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Peng Frank Ji">
<meta property="og:url" content="https://github.com/PengFrankJi/pengfrankji.github.io/index.html">
<meta property="og:site_name" content="Peng Frank Ji">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Peng Frank Ji">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Peng Frank Ji" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Peng Frank Ji</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/PengFrankJi/pengfrankji.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-test" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/01/05/test/" class="article-date">
  <time datetime="2021-01-05T12:12:44.000Z" itemprop="datePublished">2021-01-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/05/test/">test</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is a post containing pictures.</p>
<p><img src="/PengFrankJi/pengfrankji.github/hist.png"></p>
<p>This is the second time to display pictures.</p>
<p><img src="/PengFrankJi/pengfrankji.github/hist.png" alt="abcd" title="abcd"></p>
<table>
    <tr>
        <th>属性</th>
        <th>属性值</th>
        <th>描述</th>  
    </tr>
    <tr>
        <td rowspan="9">type</td>
        <td>text</td>
        <td>单行文本输入框</td>
    </tr>
    <tr>
        <td>password</td>
        <td>密码输入框</td>
    </tr>
    <tr>
        <td>radio</td>
        <td>单选按钮</td>
    </tr>
    <tr>
        <td>CheckBox</td>
        <td>复选按钮</td>
    </tr>
    <tr><td>button</td>
        <td>普通按钮</td>
    </tr>
    <tr>
        <td>submit</td>
        <td>提交按钮</td>
    </tr>
    <tr>
        <td>reset</td>
        <td>重置按钮</td>
    </tr>
    <tr>
        <td>image</td>
        <td>图像形式的提交按钮</td>
    </tr>
    <tr>
        <td>file</td>
        <td>文件域</td>
    </tr>
    <tr>
        <td>name</td>
        <td>用户自定义</td>
        <td>控件名称</td>
    </tr>
    <tr>
        <td>value</td>
        <td>用户自定义</td>
        <td>默认文本值</td>
    </tr>
    <tr>
        <td>size</td>
        <td>正整数</td>
        <td>控件在页面中的显示宽度</td>
    </tr>
    <tr>
        <td>checked</td>
        <td>checked</td>
        <td>定义选择控件默认被选中项</td>
    </tr>
    <tr>
        <td>maxlength</td>
        <td>正整数</td>
        <td>控件允许输入的最多字符</td>
    </tr>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/PengFrankJi/pengfrankji.github.io/2021/01/05/test/" data-id="ckjl5aepw0002gp0i561ncak9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Regression" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/17/Regression/" class="article-date">
  <time datetime="2020-12-17T15:14:19.000Z" itemprop="datePublished">2020-12-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/17/Regression/">Regression</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This blog is to build a regression model to forecast the sale price of houses. I got data from kaggele(<a target="_blank" rel="noopener" href="https://www.kaggle.com/c/home-data-for-ml-course">https://www.kaggle.com/c/home-data-for-ml-course</a>).</p>
<h1 id="Prepare"><a href="#Prepare" class="headerlink" title="Prepare"></a>Prepare</h1><h2 id="library-packages"><a href="#library-packages" class="headerlink" title="library packages"></a>library packages</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">library(corrplot)</span><br><span class="line">library(Boruta)</span><br><span class="line">library(leaps)</span><br><span class="line">library(lubridate)</span><br><span class="line">library(caTools)</span><br><span class="line">library(car)</span><br><span class="line">library(stats)</span><br><span class="line">library(lmtest)</span><br><span class="line">library(forecast)</span><br></pre></td></tr></table></figure>

<h2 id="read-data"><a href="#read-data" class="headerlink" title="read data"></a>read data</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data &lt;- read.csv(&quot;~&#x2F;train.csv&quot;, header &#x3D; TRUE)</span><br></pre></td></tr></table></figure>

<h1 id="Clean-data"><a href="#Clean-data" class="headerlink" title="Clean data"></a>Clean data</h1><h2 id="delete-variables"><a href="#delete-variables" class="headerlink" title="delete variables"></a>delete variables</h2><p>If there are more than 15% of observations are NA’s in one variable, which means this variable is unimportant. it will be reasonable to delete it. In my case, if there are many observations are NA’s in one variable, it means most people don’t consider this factor when buying or selling house.</p>
<hr>
<p>We can define a function to check percentage of NA’s in each variable.   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">count_na &lt;- function(x) &#123;</span><br><span class="line">  return(sum(is.na(x)))</span><br><span class="line">&#125;</span><br><span class="line">apply(data, 2, count_na) &#x2F; nrow(data)</span><br></pre></td></tr></table></figure>

<p>Results are as follows:</p>
<p><img src="/PengFrankJi/pengfrankji.github/NA_percent.png" alt="percentage of NA&#39;s in each variable"></p>
<p>From the result I decide to delete these variables: LotFrontage, Alley, FireplaceQu, PoolQC, Fence, MiscFeature</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data &lt;- subset(data, select &#x3D; -c(LotFrontage, Alley, FireplaceQu, PoolQC, Fence, MiscFeature))</span><br></pre></td></tr></table></figure>

<h2 id="drop-NA’s"><a href="#drop-NA’s" class="headerlink" title="drop NA’s"></a>drop NA’s</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data &lt;- na.omit(data)</span><br></pre></td></tr></table></figure>

<h2 id="split-train-data-set-and-test-data-set"><a href="#split-train-data-set-and-test-data-set" class="headerlink" title="split train data set and test data set"></a>split train data set and test data set</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set.seed(123) </span><br><span class="line">split &lt;- sample.split(data, SplitRatio &#x3D; 0.6) </span><br><span class="line">train &lt;- subset(data, split &#x3D;&#x3D; TRUE)</span><br></pre></td></tr></table></figure>

<h1 id="Choose-variables-and-Analyze-them"><a href="#Choose-variables-and-Analyze-them" class="headerlink" title="Choose variables and Analyze them"></a>Choose variables and Analyze them</h1><h2 id="check-correlations"><a href="#check-correlations" class="headerlink" title="check correlations"></a>check correlations</h2><p>I check the correlations between each variable here. Results are as follows:<br><img src="/PengFrankJi/pengfrankji.github/correlation.png" alt="correlation"></p>
<h2 id="boruta"><a href="#boruta" class="headerlink" title="boruta"></a>boruta</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set.seed(1)</span><br><span class="line">boruta &lt;- Boruta(SalePrice ~ ., data &#x3D; train)</span><br><span class="line">print(boruta)</span><br></pre></td></tr></table></figure>
<p><img src="/PengFrankJi/pengfrankji.github/Boruta.png" alt="results of Boruta"></p>
<p>According to the results above, I want to choose “LotArea”, “YearBuilt”, “GrLivArea”, “BedroomAbvGr”, “KitchenAbvGr”, “HouseStyle”, “SalePrice” as independent variables.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cols &lt;- c(&quot;LotArea&quot;, &quot;YearBuilt&quot;, &quot;GrLivArea&quot;, &quot;BedroomAbvGr&quot;, &quot;KitchenAbvGr&quot;, &quot;HouseStyle&quot;, &quot;SalePrice&quot;)</span><br><span class="line">train_data &lt;- subset(train, select &#x3D; cols)</span><br></pre></td></tr></table></figure>

<h2 id="analyze-the-independent-variables"><a href="#analyze-the-independent-variables" class="headerlink" title="analyze the independent variables"></a>analyze the independent variables</h2><p>Draw histogram:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">n_row &lt;- nrow(train_data)</span><br><span class="line">n_col &lt;- ncol(train_data)</span><br><span class="line">k &#x3D; 1 + log2(n_row)</span><br><span class="line">col_index &lt;- c(1: 5, 7)</span><br><span class="line">par(mfrow &#x3D; c(2, 3))</span><br><span class="line">for (i in col_index) &#123;</span><br><span class="line">  hist(train_data[, i], breaks &#x3D; k, main &#x3D; names(train)[i], xlab &#x3D; names(train)[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/PengFrankJi/pengfrankji.github/hist.png" alt="hist of independent variables"></p>
<p>Draw qqPlot:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">par(mfrow &#x3D; c(2, 3))</span><br><span class="line">for (i in col_index) &#123;</span><br><span class="line">  qqPlot(~ train_data[, i], ylab &#x3D; names(train_data)[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/PengFrankJi/pengfrankji.github/qqplot.png" alt="qqplot of variables"></p>
<p>Draw correlation between the variables:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">corrplot(cor(train_data[,col_index]))</span><br></pre></td></tr></table></figure>
<p><img src="/PengFrankJi/pengfrankji.github/correlation_chosen.png" alt="correlation of the chosen variables"></p>
<p>Draw scatterplot:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scatterplotMatrix(~ SalePrice + LotArea + YearBuilt + GrLivArea + BedroomAbvGr + KitchenAbvGr | HouseStyle, train_data)</span><br></pre></td></tr></table></figure>
<p><img src="/PengFrankJi/pengfrankji.github/scatterplot.png" alt="scatterplotMatrix"></p>
<p>Draw density of variables:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">par(mfrow &#x3D; c(2, 3))</span><br><span class="line">for (i in col_index) &#123;</span><br><span class="line">  densityPlot(train_data[, i], xlab &#x3D; names(train_data)[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/PengFrankJi/pengfrankji.github/density.png" alt="density"></p>
<h1 id="Transform-data-and-build-models"><a href="#Transform-data-and-build-models" class="headerlink" title="Transform data and build models"></a>Transform data and build models</h1><h2 id="transform-data"><a href="#transform-data" class="headerlink" title="transform data"></a>transform data</h2><p>Some varibales may not follow a normal distribution. So I need to transform the data to make it follow a normal distribution.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">summary(p1 &lt;- powerTransform(cbind(SalePrice, LotArea, YearBuilt, GrLivArea) ~ 1, data &#x3D; train_data, family &#x3D; &quot;bcPower&quot;))</span><br><span class="line">transformed &lt;- bcPower(with(train_data, cbind(SalePrice, LotArea, YearBuilt, GrLivArea)), coef(p1, round &#x3D; T))</span><br><span class="line">transformed_train &lt;- as.data.frame(cbind(transformed, as.data.frame(with(train_data, cbind(BedroomAbvGr, KitchenAbvGr, HouseStyle)))))</span><br><span class="line">names(transformed_train) &lt;- c(&quot;SalePrice&quot;, &quot;LotArea&quot;, &quot;YearBuilt&quot;, &quot;GrLivArea&quot;, &quot;BedroomAbvGr&quot;, &quot;KitchenAbvGr&quot;, &quot;HouseStyle&quot;)</span><br><span class="line">transformed_train$HouseStyle &lt;- as.factor(transformed_train$HouseStyle)</span><br></pre></td></tr></table></figure>

<h2 id="build-models-and-update-it"><a href="#build-models-and-update-it" class="headerlink" title="build models and update it"></a>build models and update it</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mod &lt;- lm(SalePrice ~ ., data &#x3D; transformed_train)</span><br><span class="line">summary(mod)</span><br></pre></td></tr></table></figure>
<table>
  <tr>
    <td colspan="6">Call:</td>
  </tr>
  <tr>
    <td colspan="6">lm(formula = SalePrice ~ ., data = transformed_train)</td>
  </tr>
  <tr>
    <td colspan="6">Residuals:</td>
  </tr>
  <tr>
        <td>Min</td>
    <td>1Q</td>
    <td>Median</td>
    <td>3Q</td>
    <td>Max</td>
    </tr>
  <tr>
    <td>-1.55410</td>
    <td>-0.08286</td>
    <td>-0.00410</td>
    <td>0.10142</td>
    <td>0.55252</td>
  </tr>
  <tr>
    <td colspan="6">Coefficients:</td>
  </tr>
  <tr>
    <td></td>
    <td>Estimate</td>
    <td>Std. Error</td>
    <td>t value</td>
    <td>Pr(>|t|)</td>
    <td></td>
  </tr>
  <tr>
    <td>(Intercept)</td>
        <td>4.928e+00</td>
        <td>1.921e-01</td>
        <td>25.655</td>
        <td>< 2e-16</td>
        <td>***</td>
  </tr>
  <tr>
    <td>LotArea</td>
    <td>1.096e-01</td>
    <td>1.396e-02</td>
    <td>7.849</td>
    <td>1.36e-14</td>
    <td>***</td>
  </tr>
    <tr>
    <td>YearBuilt</td>
    <td>4.273e-103</td>
    <td>2.210e-104</td>
    <td>19.332</td>
    <td>< 2e-16</td>
    <td>***</td>
  </tr>
    <tr>
    <td>GrLivArea</td>
    <td>8.318e-01</td>
    <td>3.140e-02</td>
    <td>26.494</td>
    <td>< 2e-16</td>
    <td>***</td>
  </tr>
    <tr>
    <td>BedroomAbvGr</td>
    <td>-4.499e-02</td>
    <td>9.699e-03</td>
    <td>-4.638</td>
    <td>4.12e-06</td>
    <td>***</td>
  </tr>
    <tr>
    <td>KitchenAbvGr</td>
    <td>-2.448e-01</td>
    <td>3.564e-02</td>
    <td>-6.868</td>
    <td>1.32e-11</td>
    <td>***</td>
  </tr>
    <tr>
    <td>HouseStyle2</td>
    <td>1.452e-01</td>
    <td>1.035e-01</td>
    <td>1.402</td>
    <td>0.1613</td>
    <td></td>
  </tr>
    <tr>
    <td>HouseStyle3</td>
    <td>1.320e-01</td>
    <td>2.522e-02</td>
    <td>5.234</td>
    <td>2.13e-07</td>
    <td>***</td>
  </tr>
    <tr>
    <td>HouseStyle4</td>
    <td>9.552e-03</td>
    <td>8.126e-02</td>
    <td>0.118</td>
    <td>0.9065</td>
    <td></td>
  </tr>
    <tr>
    <td>HouseStyle5</td>
    <td>8.107e-02</td>
    <td>7.368e-02</td>
    <td>1.100</td>
    <td>0.2715</td>
    <td></td>
  </tr>
    <tr>
    <td>HouseStyle6</td>
    <td>-8.013e-03</td>
    <td>2.482e-02</td>
    <td>-0.323</td>
    <td>0.7469</td>
    <td></td>
  </tr>
    <tr>
    <td>HouseStyle7</td>
    <td>1.923e-01</td>
    <td>4.780e-02</td>
    <td>4.022</td>
    <td>6.33e-05</td>
    <td>***</td>
  </tr>
    <tr>
    <td>HouseStyle8</td>
    <td>7.422e-02</td>
    <td>3.613e-02</td>
    <td>2.054</td>
    <td>0.0403</td>
    <td>*</td>
  </tr>
  <tr>
    <td colspan="6">---</td>
  </tr>
  <tr>
    <td colspan="6">Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</td>
  </tr>
  <tr>
    <td></td>
  </tr>
  <tr>
    <td colspan="6">Residual standard error: 0.172 on 791 degrees of freedom</td>
  </tr>
  <tr>
    <td colspan="6">Multiple R-squared:  0.7917,    Adjusted R-squared:  0.7885 </td>
  </tr>
  <tr>
    <td colspan="6">F-statistic: 250.5 on 12 and 791 DF,  p-value: < 2.2e-16
</td>
  </tr>
</table>

<p>Draw the residual of the model:</p>
<p><img src="/PengFrankJi/pengfrankji.github/residual.png" alt="residual"></p>
<p>Get the outliers:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">outlierTest(mod)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th></th>
<th>student</th>
<th>unadjusted p-value</th>
<th>Bonferroni p</th>
</tr>
</thead>
<tbody><tr>
<td>715</td>
<td>-9.764768</td>
<td>2.4244e-21</td>
<td>1.9492e-18</td>
</tr>
<tr>
<td>16</td>
<td>-6.325350</td>
<td>4.2267e-10</td>
<td>3.3982e-07</td>
</tr>
<tr>
<td>225</td>
<td>-5.350497</td>
<td>1.1499e-07</td>
<td>9.2454e-05</td>
</tr>
<tr>
<td>349</td>
<td>-4.648032</td>
<td>3.9260e-06</td>
<td>3.1565e-03</td>
</tr>
</tbody></table>
<p>Get the influences:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">influenceIndexPlot(mod, id &#x3D; list(n &#x3D; 12), vars &#x3D; &quot;Cook&quot;)</span><br></pre></td></tr></table></figure>

<p><img src="/PengFrankJi/pengfrankji.github/influence.png" alt="influence"></p>
<p>Remove outliers and influences and rebuild the model.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">outliers &lt;- c(715, 16, 225, 349)</span><br><span class="line">influentials &lt;- c(6, 16, 100, 181, 211, 320, 490, 565, 582, 639, 685, 715)</span><br><span class="line">mod1 &lt;- update(mod, subset &#x3D; !(rownames(transformed_train) %in% c(outliers, influentials)))</span><br><span class="line">summary(mod1)</span><br></pre></td></tr></table></figure>

<table>
  <tr>
    <td colspan="6">Call:</td>
  </tr>
  <tr>
    <td colspan="6">lm(formula = SalePrice ~ ., data = transformed_train, subset = !(rownames(transformed_train) %in% c(outliers, influentials)))</td>
  </tr>
  <tr>
    <td colspan="6">Residuals:</td>
  </tr>
  <tr>
        <td>Min</td>
    <td>1Q</td>
    <td>Median</td>
    <td>3Q</td>
    <td>Max</td>
    </tr>
  <tr>
    <td>-0.57815</td>
    <td>-0.08212</td>
    <td>-0.00461</td>
    <td>0.09778</td>
    <td>0.53924</td>
  </tr>
  <tr>
    <td colspan="6">Coefficients:</td>
  </tr>
  <tr>
    <td></td>
    <td>Estimate</td>
    <td>Std. Error</td>
    <td>t value</td>
    <td>Pr(>|t|)</td>
    <td></td>
  </tr>
  <tr>
    <td>(Intercept)</td>
        <td>4.617e+00</td>
        <td>1.713e-01</td>
        <td>26.963</td>
        <td>< 2e-16</td>
        <td>***</td>
  </tr>
  <tr>
    <td>LotArea</td>
    <td>1.206e-01</td>
    <td>1.216e-02</td>
    <td>9.917</td>
    <td>< 2e-16</td>
    <td>***</td>
  </tr>
    <tr>
    <td>YearBuilt</td>
    <td>4.081e-103</td>
    <td>1.927e-104</td>
    <td>21.178</td>
    <td>< 2e-16</td>
    <td>***</td>
  </tr>
    <tr>
    <td>GrLivArea</td>
    <td>8.633e-01</td>
    <td>2.754e-02</td>
    <td>31.348</td>
    <td>< 2e-16</td>
    <td>***</td>
  </tr>
    <tr>
    <td>BedroomAbvGr</td>
    <td>-5.335e-02</td>
    <td>8.661e-03</td>
    <td>-6.160</td>
    <td>1.17e-09</td>
    <td>***</td>
  </tr>
    <tr>
    <td>KitchenAbvGr</td>
    <td>-2.321e-01</td>
    <td>3.253e-02</td>
    <td>-7.134</td>
    <td>2.24e-12</td>
    <td>***</td>
  </tr>
    <tr>
    <td>HouseStyle2</td>
    <td>1.680e-01</td>
    <td>1.508e-01</td>
    <td>1.115</td>
    <td>0.26533</td>
    <td></td>
  </tr>
    <tr>
    <td>HouseStyle3</td>
    <td>1.465e-01</td>
    <td>2.190e-02</td>
    <td>6.689</td>
    <td>4.29e-11</td>
    <td>***</td>
  </tr>
    <tr>
    <td>HouseStyle4</td>
    <td>-5.368e-02</td>
    <td>1.073e-01</td>
    <td>-0.500</td>
    <td>0.61700</td>
    <td></td>
  </tr>
    <tr>
    <td>HouseStyle5</td>
    <td>8.019e-03</td>
    <td>8.844e-02</td>
    <td>0.091</td>
    <td>0.92778</td>
    <td></td>
  </tr>
  <tr>
    <td>HouseStyle6</td>
    <td>1.124e-02</td>
    <td>2.157e-02</td>
    <td>0.521</td>
    <td>0.60246</td>
    <td></td>
  </tr>
  <tr>
    <td>HouseStyle7</td>
    <td>2.254e-01</td>
    <td>4.195e-02</td>
    <td>5.373</td>
    <td>1.02e-07</td>
    <td>***</td>
  </tr>
  <tr>
    <td>HouseStyle8</td>
    <td>8.229e-02</td>
    <td>3.131e-02</td>
    <td>2.628</td>
    <td>0.00875</td>
    <td>**</td>
  </tr>
  <tr>
    <td colspan="6">---</td>
  </tr>
  <tr>
    <td colspan="6">Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</td>
  </tr>
  <tr>
    <td></td>
  </tr>
  <tr>
    <td colspan="6">Residual standard error: 0.1489 on 777 degrees of freedom</td>
  </tr>
  <tr>
    <td colspan="6">Multiple R-squared:  0.8362,    Adjusted R-squared:  0.8337  </td>
  </tr>
  <tr>
    <td colspan="6">F-statistic: 330.5 on 12 and 791 DF,  p-value: < 2.2e-16
</td>
  </tr>
</table>

<p>Verify the existence of multivariate collinearity.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vif(mod1)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th></th>
<th>GVIF</th>
<th>Df</th>
<th>GVIF^(1/(2*Df))</th>
</tr>
</thead>
<tbody><tr>
<td>LotArea</td>
<td>1.359656</td>
<td>1</td>
<td>1.166043</td>
</tr>
<tr>
<td>YearBuilt</td>
<td>1.646681</td>
<td>1</td>
<td>1.283231</td>
</tr>
<tr>
<td>GrLivArea</td>
<td>2.551335</td>
<td>1</td>
<td>1.597290</td>
</tr>
<tr>
<td>BedroomAbvGr</td>
<td>1.599169</td>
<td>1</td>
<td>1.264583</td>
</tr>
<tr>
<td>KitchenAbvGr</td>
<td>1.154793</td>
<td>1</td>
<td>1.074613</td>
</tr>
<tr>
<td>HouseStyle</td>
<td>2.318203</td>
<td>7</td>
<td>1.061897</td>
</tr>
</tbody></table>
<p>From the result we can assume that there is no multicollinearity.</p>
<h1 id="Forecast"><a href="#Forecast" class="headerlink" title="Forecast"></a>Forecast</h1><p>Transform data in test set with the same parameters assigned to train set.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">test &lt;- subset(data, split &#x3D;&#x3D; FALSE)</span><br><span class="line">test_data &lt;- subset(test, select &#x3D; cols)</span><br><span class="line">transformed_t &lt;- bcPower(with(test_data, cbind(SalePrice, LotArea, YearBuilt, GrLivArea)), coef(p1, round &#x3D; T))</span><br><span class="line">transformed_test &lt;- as.data.frame(cbind(transformed_t, as.data.frame(with(test_data, cbind(BedroomAbvGr, KitchenAbvGr, HouseStyle)))))</span><br><span class="line">names(transformed_test) &lt;- c(&quot;SalePrice&quot;, &quot;LotArea&quot;, &quot;YearBuilt&quot;, &quot;GrLivArea&quot;, &quot;BedroomAbvGr&quot;, &quot;KitchenAbvGr&quot;, &quot;HouseStyle&quot;)</span><br><span class="line">transformed_test$HouseStyle &lt;- as.factor(transformed_test$HouseStyle)</span><br></pre></td></tr></table></figure>



<p>Evaluate forecast results in model and reality.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">predict_test &lt;- predict(mod1, newdata &#x3D; transformed_test)</span><br><span class="line">accuracy(predict_test, transformed_test$SalePrice)</span><br><span class="line">accuracy(exp(predict_test), test_data$SalePrice)</span><br></pre></td></tr></table></figure>

<p>Evaluation in model:</p>
<table>
<thead>
<tr>
<th></th>
<th>ME</th>
<th>RMSE</th>
<th>MAE</th>
<th>MPE</th>
<th>MAPE</th>
</tr>
</thead>
<tbody><tr>
<td>Test set</td>
<td>0.005868222</td>
<td>0.1732775</td>
<td>0.1246665</td>
<td>0.03108708</td>
<td>1.035723</td>
</tr>
</tbody></table>
<p>Evaluation in reality:</p>
<table>
<thead>
<tr>
<th></th>
<th>ME</th>
<th>RMSE</th>
<th>MAE</th>
<th>MPE</th>
<th>MAPE</th>
</tr>
</thead>
<tbody><tr>
<td>Test set</td>
<td>3755.588</td>
<td>41902.56</td>
<td>24054.72</td>
<td>-1.044017</td>
<td>12.86281</td>
</tr>
</tbody></table>
<p>From the evaluation, we can assume that the model is useful.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/PengFrankJi/pengfrankji.github.io/2020/12/17/Regression/" data-id="ckjl5aepq0000gp0ihu8f5cpd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/10/hello-world/" class="article-date">
  <time datetime="2020-12-10T09:35:17.096Z" itemprop="datePublished">2020-12-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/10/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/PengFrankJi/pengfrankji.github.io/2020/12/10/hello-world/" data-id="ckjl5aepv0001gp0i0jmehigi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/01/05/test/">test</a>
          </li>
        
          <li>
            <a href="/2020/12/17/Regression/">Regression</a>
          </li>
        
          <li>
            <a href="/2020/12/10/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Peng Frank Ji<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>